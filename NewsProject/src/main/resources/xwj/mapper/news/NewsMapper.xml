<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xwj.mapper.news.NewsMapper">
    <insert id="add">
        insert into news
            (newsId, newsTitle, newsContent, newsDesc, newsIcon,
             newsLevelId, newsTypeId, newsTag,author)
        values (#{newsId},#{newsTitle},#{newsContent},#{newsDesc},
                #{newsIcon},#{newsLevelId},#{newsTypeId},#{newsTag},#{author});
    </insert>
    <update id="updateById">
        update news
       <set>
        <if test="newsTitle != null and newsTitle != ''">
            newsTitle = #{newsTitle},
        </if>
        <if test="newsContent != null and newsContent != ''">
            newsContent = #{newsContent},
        </if>
        <if test="newsDesc != null and newsDesc != ''">
            newsDesc = #{newsDesc},
        </if>
        <if test="newsIcon != null and newsIcon != ''">
            newsIcon = #{newsIcon},
        </if>
        <if test="newsLevelId != null and newsLevelId != ''">
            newsLevelId = #{newsLevelId},
        </if>
        <if test="newsTypeId != null and newsTypeId != ''">
            newsTypeId = #{newsTypeId},
        </if>

        <if test="newsTag != null and newsTag != ''">
            newsTag = #{newsTag},
        </if>
            <if test="author != null and author != ''">
                author = #{author},
        </if>
       </set>
        where newsId = #{newsId};
    </update>
    <delete id="delete">
        delete
        from news
        where newsId=#{newId};
    </delete>


    <select id="selectById" resultType="xwj.bean.News">
        select *
        from news where newsId=#{newsId};
    </select>
    <select id="selectAllNews" resultType="xwj.bean.News">
        select *
        from news;
    </select>
    <select id="selectLike" resultType="xwj.bean.News">
        select *
        from news where newsDesc like '%${like}%' limit 5;
    </select>
    <select id="selectAllNewsWithUserId" resultType="xwj.bean.News">
        select newsId,
               newsTitle,
               newsContent,
               newsTimestamp,
               newsDesc,
               newsIcon,
               newsLevelId,
               newsTypeId,
               newsTag,
               author
        from users,
             news
        where userId = author
          and author = #{author};
    </select>


</mapper>